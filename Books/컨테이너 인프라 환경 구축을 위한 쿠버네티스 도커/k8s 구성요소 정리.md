# k8s 구성요소 정리

### master node 구성요소 - 교재 94 ~ 101p 참고

#### kubectl

kubectl은 쿠버네티스 클러스터에 변경 명령을 내리는 역할을 수행합니다.

API서버와 통신하여 etcd의 내용을 변경합니다.

<br>

#### etcd

구성파일이 저장되는 디렉토리인 etc와 배포된 이라는 뜻의 distributed 의 합성어로 배포되는 구성파일을 의미합니다.

구성요소들의 이름과 값이 key, value 형태로 저장되어 있고, master node 에 위치합니다.

시스템의 가용성을 확보하기 위해 이중화를 수행할 수 있는데, kubespray 로 구성가능합니다.

<br>

#### API 서버

API 서버에서는 쿠버네티스 클러스터의 중심역할을 하는 통로입니다.

etcd 와 통신하여 상태변경을 감지하는 역할을 수행

<br>

#### 컨트롤러 매니저

쿠버네티스 클러스터의 오브젝트 상태를 관리합니다.

컨트롤러 매니저에 컨트롤러들은 아래와 같습니다.

- 노드 컨트롤러: worker node에서 통신이 되지 않는 경우, 상태체크와 복구를 수행합니다.
- 레플리카셋 컨트롤러: 레플리카셋에 요청받은 파드 개수대로 파드를 생성합니다.
- 엔드포인트 컨트롤러: 서비스와 파드를 연결하는 역할을 수행합니다.

<br>

#### 스케줄러

파드를 어떤 노드에 생성할지 결정하고, 할당하는 역할을 수행합니다.

<br>

### worker node 구성요소 - 교재 94 ~ 101p 참고

#### 파드

단일 목적의 일을 수행하기 위해 모인 하나 이상의 컨테이너 단위를 의미합니다.

<br>

#### 컨테이너 런타임

파드를 이루는 컨테이너의 실행을 담당합니다.

<br>

#### kubelet

파드의 구성 내용을 받아서 컨테이너 런타임으로 전달하고, 파드 안의 컨테이너들이 정상동작하는지 모니터링합니다.

<br>

#### kube-proxy

쿠버네티스 클러스터는 파드가 위치한 노드에 파드가 통신할 수 있는 네트워크를 설정하는 역할을 수행합니다.

<br>

### 오브젝트 - 교재 112p 참고

파드와 디플로이먼트는 스펙과 상태 등의 값을 가집니다.

파드와 디플로이먼트를 개별 속성을 포함해 부르는 단위를 오브젝트라고 합니다.

<br>

#### 파드

쿠버네티스 클러스터에서 실행되는 최소 단위

독립적인 공간과 사용가능한 IP를 가지고 있음.

<br>

#### 네임스페이스

쿠버네티스 클러스터에서 사용되는 리소스들을 구분해 관리하는 그룹

<br>

#### 볼륨

파드가 생성될 때, 파드에서 사용할 수 있는 디렉토리도 함께 제공됩니다. 이를 볼륨이라고 부릅니다.

임시로 사용되지만, 파드가 사라지더라도 저장과 보존이 가능한 디렉토리를 볼륨 오브젝트를 통해 생성하고 사용할 수 있습니다.

<br>

#### 서비스

쿠버네티스 클러스터 내에서 파드는 유동적이기 때문에 접속정보가 고정적이지않습니다.

파드 접속을 안정적으로 유지하기 위해 내/외부를 연결해주는 역할을 하는 것이 서비스입니다.

파드가 생성될 때, 부여되는 새로운 IP에 기존에 제공하던 기능을 연결해줍니다.

<br>

#### 디플로이먼트

오브젝트가 효율적으로 작동하도록 기능들을 조합하고 추가해 구현한 것

예를 들어, 디플로이먼트 오브젝트는 파드에 기반하며, 레플리카셋 오브젝트를 합쳐놓은 형태입니다.

<br>
